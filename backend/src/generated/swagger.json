{
	"openapi": "3.0.0",
	"components": {
		"examples": {},
		"headers": {},
		"parameters": {},
		"requestBodies": {},
		"responses": {},
		"schemas": {
			"_36_Enums.UserRole": {
				"type": "string",
				"enum": [
					"GUEST",
					"UNVERIFIED",
					"USER",
					"TRUSTED",
					"MODERATOR",
					"ADMIN"
				]
			},
			"UserRole": {
				"$ref": "#/components/schemas/_36_Enums.UserRole"
			},
			"UserPublicDTO": {
				"properties": {
					"createdAt": {
						"type": "string"
					},
					"website": {
						"type": "string",
						"nullable": true
					},
					"bio": {
						"type": "string",
						"nullable": true
					},
					"avatarUrl": {
						"type": "string",
						"nullable": true
					},
					"role": {
						"$ref": "#/components/schemas/UserRole"
					},
					"username": {
						"type": "string"
					},
					"id": {
						"type": "string"
					}
				},
				"required": [
					"createdAt",
					"website",
					"bio",
					"avatarUrl",
					"role",
					"username",
					"id"
				],
				"type": "object"
			},
			"TagPublicDTO": {
				"properties": {
					"addedAt": {
						"type": "string"
					},
					"color": {
						"type": "string"
					},
					"name": {
						"type": "string"
					},
					"id": {
						"type": "string"
					}
				},
				"required": [
					"color",
					"name",
					"id"
				],
				"type": "object"
			},
			"MediaPublicDTO": {
				"properties": {
					"commentCount": {
						"type": "number",
						"format": "double"
					},
					"myRating": {
						"type": "number",
						"format": "double",
						"nullable": true
					},
					"ratingCount": {
						"type": "number",
						"format": "double"
					},
					"ratingAvg": {
						"type": "number",
						"format": "double"
					},
					"favorite": {
						"type": "boolean"
					},
					"tags": {
						"items": {
							"$ref": "#/components/schemas/TagPublicDTO"
						},
						"type": "array"
					},
					"previewUrl": {
						"type": "string",
						"nullable": true
					},
					"createdAt": {
						"type": "string"
					},
					"isExplicit": {
						"type": "boolean"
					},
					"description": {
						"type": "string",
						"nullable": true
					},
					"duration": {
						"type": "number",
						"format": "double",
						"nullable": true
					},
					"height": {
						"type": "number",
						"format": "double",
						"nullable": true
					},
					"width": {
						"type": "number",
						"format": "double",
						"nullable": true
					},
					"size": {
						"type": "number",
						"format": "double"
					},
					"contentType": {
						"type": "string"
					},
					"type": {
						"type": "string",
						"enum": [
							"IMAGE",
							"VIDEO"
						]
					},
					"id": {
						"type": "string"
					}
				},
				"required": [
					"commentCount",
					"myRating",
					"ratingCount",
					"ratingAvg",
					"favorite",
					"tags",
					"previewUrl",
					"createdAt",
					"isExplicit",
					"description",
					"duration",
					"height",
					"width",
					"size",
					"contentType",
					"type",
					"id"
				],
				"type": "object"
			},
			"MediaUserDTO": {
				"allOf": [
					{
						"$ref": "#/components/schemas/MediaPublicDTO"
					},
					{
						"properties": {
							"originalUrl": {
								"type": "string",
								"nullable": true
							}
						},
						"required": [
							"originalUrl"
						],
						"type": "object"
					}
				]
			},
			"MediaModeratorDTO": {
				"allOf": [
					{
						"$ref": "#/components/schemas/MediaUserDTO"
					},
					{
						"properties": {
							"previewKey": {
								"type": "string",
								"nullable": true
							},
							"originalKey": {
								"type": "string"
							},
							"deletedBy": {
								"type": "string",
								"nullable": true
							},
							"deletedAt": {
								"type": "string",
								"nullable": true
							},
							"moderationNotes": {
								"type": "string",
								"nullable": true
							},
							"moderatedById": {
								"type": "string",
								"nullable": true
							},
							"moderatedAt": {
								"type": "string",
								"nullable": true
							},
							"moderationStatus": {
								"type": "string",
								"enum": [
									"PENDING",
									"APPROVED",
									"REJECTED"
								]
							},
							"hash": {
								"type": "string"
							}
						},
						"required": [
							"previewKey",
							"originalKey",
							"deletedBy",
							"deletedAt",
							"moderationNotes",
							"moderatedById",
							"moderatedAt",
							"moderationStatus",
							"hash"
						],
						"type": "object"
					}
				]
			},
			"MediaVisibleDTO": {
				"anyOf": [
					{
						"$ref": "#/components/schemas/MediaPublicDTO"
					},
					{
						"$ref": "#/components/schemas/MediaUserDTO"
					},
					{
						"$ref": "#/components/schemas/MediaModeratorDTO"
					}
				]
			},
			"UserMediaListResponseDTO": {
				"properties": {
					"nextCursor": {
						"type": "string",
						"nullable": true
					},
					"data": {
						"items": {
							"$ref": "#/components/schemas/MediaVisibleDTO"
						},
						"type": "array"
					}
				},
				"required": [
					"nextCursor",
					"data"
				],
				"type": "object"
			},
			"_36_Enums.CommentDeletedKind": {
				"type": "string",
				"enum": [
					"USER",
					"MODERATOR"
				]
			},
			"CommentDeletedKind": {
				"$ref": "#/components/schemas/_36_Enums.CommentDeletedKind"
			},
			"CommentAuthorDTO": {
				"properties": {
					"role": {
						"$ref": "#/components/schemas/UserRole"
					},
					"username": {
						"type": "string"
					},
					"id": {
						"type": "string"
					}
				},
				"required": [
					"role",
					"username",
					"id"
				],
				"type": "object"
			},
			"CommentDTO": {
				"properties": {
					"user": {
						"$ref": "#/components/schemas/CommentAuthorDTO"
					},
					"createdAt": {
						"type": "string"
					},
					"deletedReason": {
						"type": "string",
						"nullable": true
					},
					"deletedKind": {
						"allOf": [
							{
								"$ref": "#/components/schemas/CommentDeletedKind"
							}
						],
						"nullable": true
					},
					"isDeleted": {
						"type": "boolean"
					},
					"content": {
						"type": "string",
						"nullable": true
					},
					"parentId": {
						"type": "string",
						"nullable": true
					},
					"userId": {
						"type": "string"
					},
					"mediaId": {
						"type": "string"
					},
					"id": {
						"type": "string"
					}
				},
				"required": [
					"user",
					"createdAt",
					"deletedReason",
					"deletedKind",
					"isDeleted",
					"content",
					"parentId",
					"userId",
					"mediaId",
					"id"
				],
				"type": "object"
			},
			"UserCommentsListResponseDTO": {
				"properties": {
					"nextCursor": {
						"type": "string",
						"nullable": true
					},
					"data": {
						"items": {
							"$ref": "#/components/schemas/CommentDTO"
						},
						"type": "array"
					}
				},
				"required": [
					"nextCursor",
					"data"
				],
				"type": "object"
			},
			"UserRatingItemDTO": {
				"properties": {
					"media": {
						"$ref": "#/components/schemas/MediaVisibleDTO"
					},
					"value": {
						"type": "number",
						"format": "double"
					}
				},
				"required": [
					"media",
					"value"
				],
				"type": "object"
			},
			"UserRatingsListResponseDTO": {
				"properties": {
					"nextCursor": {
						"type": "string",
						"nullable": true
					},
					"data": {
						"items": {
							"$ref": "#/components/schemas/UserRatingItemDTO"
						},
						"type": "array"
					}
				},
				"required": [
					"nextCursor",
					"data"
				],
				"type": "object"
			},
			"UserSelfDTO": {
				"properties": {
					"isBanned": {
						"type": "boolean"
					},
					"warningCount": {
						"type": "number",
						"format": "double"
					},
					"uploadCount": {
						"type": "number",
						"format": "double"
					},
					"showUploads": {
						"type": "boolean"
					},
					"showFavorites": {
						"type": "boolean"
					},
					"showRatings": {
						"type": "boolean"
					},
					"showComments": {
						"type": "boolean"
					},
					"emailVerifiedAt": {
						"type": "string",
						"nullable": true
					},
					"updatedAt": {
						"type": "string"
					},
					"createdAt": {
						"type": "string"
					},
					"website": {
						"type": "string",
						"nullable": true
					},
					"bio": {
						"type": "string",
						"nullable": true
					},
					"avatarUrl": {
						"type": "string",
						"nullable": true
					},
					"birthDate": {
						"type": "string",
						"nullable": true
					},
					"role": {
						"$ref": "#/components/schemas/UserRole"
					},
					"email": {
						"type": "string"
					},
					"username": {
						"type": "string"
					},
					"id": {
						"type": "string"
					}
				},
				"required": [
					"isBanned",
					"warningCount",
					"uploadCount",
					"showUploads",
					"showFavorites",
					"showRatings",
					"showComments",
					"emailVerifiedAt",
					"updatedAt",
					"createdAt",
					"website",
					"bio",
					"avatarUrl",
					"birthDate",
					"role",
					"email",
					"username",
					"id"
				],
				"type": "object"
			},
			"TagSuggestDTO": {
				"properties": {
					"canonicalName": {
						"type": "string"
					},
					"canonicalId": {
						"type": "string"
					},
					"categoryName": {
						"type": "string"
					},
					"color": {
						"type": "string"
					},
					"usageCount": {
						"type": "number",
						"format": "double"
					},
					"name": {
						"type": "string"
					},
					"id": {
						"type": "string"
					},
					"kind": {
						"type": "string",
						"enum": [
							"tag",
							"alias"
						]
					}
				},
				"required": [
					"canonicalName",
					"canonicalId",
					"color",
					"usageCount",
					"name",
					"id",
					"kind"
				],
				"type": "object"
			},
			"TagSuggestListResponseDTO": {
				"properties": {
					"data": {
						"items": {
							"$ref": "#/components/schemas/TagSuggestDTO"
						},
						"type": "array"
					}
				},
				"required": [
					"data"
				],
				"type": "object"
			},
			"TagSearchDTO": {
				"properties": {
					"categoryName": {
						"type": "string"
					},
					"usageCount": {
						"type": "number",
						"format": "double"
					},
					"color": {
						"type": "string"
					},
					"name": {
						"type": "string"
					},
					"id": {
						"type": "string"
					}
				},
				"required": [
					"usageCount",
					"color",
					"name",
					"id"
				],
				"type": "object"
			},
			"TagSearchListResponseDTO": {
				"properties": {
					"data": {
						"items": {
							"$ref": "#/components/schemas/TagSearchDTO"
						},
						"type": "array"
					}
				},
				"required": [
					"data"
				],
				"type": "object"
			},
			"CreateTagBodyDTO": {
				"properties": {
					"categoryId": {
						"type": "string"
					},
					"name": {
						"type": "string"
					}
				},
				"required": [
					"categoryId",
					"name"
				],
				"type": "object"
			},
			"TagAdminDTO": {
				"allOf": [
					{
						"$ref": "#/components/schemas/TagSearchDTO"
					},
					{
						"properties": {
							"isExplicit": {
								"type": "boolean"
							},
							"customColor": {
								"type": "string",
								"nullable": true
							},
							"categoryId": {
								"type": "string"
							}
						},
						"required": [
							"isExplicit",
							"customColor",
							"categoryId"
						],
						"type": "object"
					}
				]
			},
			"PatchTagBodyDTO": {
				"properties": {
					"isExplicit": {
						"type": "boolean"
					},
					"customColor": {
						"type": "string",
						"nullable": true
					}
				},
				"type": "object"
			},
			"TagAliasesListResponseDTO": {
				"properties": {
					"data": {
						"items": {},
						"type": "array"
					}
				},
				"required": [
					"data"
				],
				"type": "object"
			},
			"CreateAliasBodyDTO": {
				"properties": {
					"alias": {
						"type": "string"
					}
				},
				"required": [
					"alias"
				],
				"type": "object"
			},
			"OkDTO": {
				"properties": {
					"status": {
						"type": "string",
						"enum": [
							"ok"
						],
						"nullable": false
					}
				},
				"required": [
					"status"
				],
				"type": "object"
			},
			"TagNamesBodyDTO": {
				"properties": {
					"tags": {
						"items": {
							"type": "string"
						},
						"type": "array"
					}
				},
				"required": [
					"tags"
				],
				"type": "object"
			},
			"SearchMetaDTO": {
				"properties": {
					"excludedComic": {
						"type": "boolean"
					},
					"forcedByQuery": {
						"type": "boolean"
					},
					"comicMode": {
						"type": "boolean"
					}
				},
				"required": [
					"excludedComic",
					"forcedByQuery",
					"comicMode"
				],
				"type": "object"
			},
			"SearchMediaItemDTO": {
				"properties": {
					"previewUrl": {
						"type": "string",
						"nullable": true
					},
					"favorite": {
						"type": "boolean"
					},
					"tags": {
						"items": {
							"allOf": [
								{
									"$ref": "#/components/schemas/TagSearchDTO"
								},
								{
									"properties": {
										"addedAt": {
											"type": "string"
										},
										"customColor": {
											"type": "string",
											"nullable": true
										},
										"categoryId": {
											"type": "string"
										}
									},
									"required": [
										"addedAt",
										"customColor",
										"categoryId"
									],
									"type": "object"
								}
							]
						},
						"type": "array"
					},
					"deletedBy": {
						"type": "string",
						"nullable": true
					},
					"deletedAt": {
						"type": "string",
						"nullable": true
					},
					"updatedAt": {
						"type": "string"
					},
					"createdAt": {
						"type": "string"
					},
					"uploadedById": {
						"type": "string"
					},
					"moderationNotes": {
						"type": "string",
						"nullable": true
					},
					"moderatedById": {
						"type": "string",
						"nullable": true
					},
					"moderatedAt": {
						"type": "string",
						"nullable": true
					},
					"moderationStatus": {
						"type": "string",
						"enum": [
							"PENDING",
							"APPROVED",
							"REJECTED"
						]
					},
					"previewKey": {
						"type": "string",
						"nullable": true
					},
					"originalKey": {
						"type": "string"
					},
					"hash": {
						"type": "string"
					},
					"commentCount": {
						"type": "number",
						"format": "double"
					},
					"myRating": {
						"type": "number",
						"format": "double",
						"nullable": true
					},
					"ratingCount": {
						"type": "number",
						"format": "double"
					},
					"ratingAvg": {
						"type": "number",
						"format": "double"
					},
					"isExplicit": {
						"type": "boolean"
					},
					"description": {
						"type": "string",
						"nullable": true
					},
					"duration": {
						"type": "number",
						"format": "double",
						"nullable": true
					},
					"height": {
						"type": "number",
						"format": "double",
						"nullable": true
					},
					"width": {
						"type": "number",
						"format": "double",
						"nullable": true
					},
					"size": {
						"type": "number",
						"format": "double"
					},
					"contentType": {
						"type": "string"
					},
					"type": {
						"type": "string",
						"enum": [
							"IMAGE",
							"VIDEO"
						]
					},
					"id": {
						"type": "string"
					}
				},
				"required": [
					"previewUrl",
					"favorite",
					"tags",
					"deletedBy",
					"deletedAt",
					"updatedAt",
					"createdAt",
					"uploadedById",
					"moderationNotes",
					"moderatedById",
					"moderatedAt",
					"moderationStatus",
					"previewKey",
					"originalKey",
					"hash",
					"commentCount",
					"myRating",
					"ratingCount",
					"ratingAvg",
					"isExplicit",
					"description",
					"duration",
					"height",
					"width",
					"size",
					"contentType",
					"type",
					"id"
				],
				"type": "object"
			},
			"SearchComicItemDTO": {
				"properties": {
					"previewUrl": {
						"type": "string",
						"nullable": true
					},
					"updatedAt": {
						"type": "string"
					},
					"createdAt": {
						"type": "string"
					},
					"ratingCount": {
						"type": "number",
						"format": "double"
					},
					"ratingAvg": {
						"type": "number",
						"format": "double"
					},
					"isExplicit": {
						"type": "boolean"
					},
					"randomKey": {
						"type": "number",
						"format": "double"
					},
					"lastPageMediaId": {
						"type": "string",
						"nullable": true
					},
					"lastPageAddedAt": {
						"type": "string",
						"nullable": true
					},
					"coverMediaId": {
						"type": "string",
						"nullable": true
					},
					"createdById": {
						"type": "string"
					},
					"status": {
						"type": "string"
					},
					"title": {
						"type": "string"
					},
					"id": {
						"type": "string"
					}
				},
				"required": [
					"previewUrl",
					"updatedAt",
					"createdAt",
					"ratingCount",
					"ratingAvg",
					"isExplicit",
					"randomKey",
					"lastPageMediaId",
					"lastPageAddedAt",
					"coverMediaId",
					"createdById",
					"status",
					"title",
					"id"
				],
				"type": "object"
			},
			"SearchResponseDTO": {
				"properties": {
					"nextCursor": {
						"type": "string",
						"nullable": true
					},
					"data": {
						"items": {
							"anyOf": [
								{
									"$ref": "#/components/schemas/SearchMediaItemDTO"
								},
								{
									"$ref": "#/components/schemas/SearchComicItemDTO"
								}
							]
						},
						"type": "array"
					},
					"meta": {
						"$ref": "#/components/schemas/SearchMetaDTO"
					}
				},
				"required": [
					"nextCursor",
					"data",
					"meta"
				],
				"type": "object"
			},
			"RatingResultDTO": {
				"properties": {
					"myRating": {
						"type": "number",
						"format": "double",
						"nullable": true
					},
					"ratingCount": {
						"type": "number",
						"format": "double"
					},
					"ratingAvg": {
						"type": "number",
						"format": "double"
					}
				},
				"required": [
					"myRating",
					"ratingCount",
					"ratingAvg"
				],
				"type": "object"
			},
			"RateMediaResponseDTO": {
				"allOf": [
					{
						"properties": {
							"status": {
								"type": "string",
								"enum": [
									"ok"
								],
								"nullable": false
							}
						},
						"required": [
							"status"
						],
						"type": "object"
					},
					{
						"$ref": "#/components/schemas/RatingResultDTO"
					}
				]
			},
			"SetRatingBodyDTO": {
				"properties": {
					"value": {
						"type": "number",
						"format": "double"
					}
				},
				"required": [
					"value"
				],
				"type": "object"
			},
			"MediaListResponseDTO": {
				"properties": {
					"nextCursor": {
						"type": "string",
						"nullable": true
					},
					"data": {
						"items": {
							"$ref": "#/components/schemas/MediaVisibleDTO"
						},
						"type": "array"
					}
				},
				"required": [
					"nextCursor",
					"data"
				],
				"type": "object"
			},
			"MediaUploadDTO": {
				"properties": {
					"createdAt": {
						"type": "string"
					},
					"moderationStatus": {
						"type": "string",
						"enum": [
							"PENDING",
							"APPROVED",
							"REJECTED"
						]
					},
					"size": {
						"type": "number",
						"format": "double"
					},
					"contentType": {
						"type": "string"
					},
					"type": {
						"type": "string",
						"enum": [
							"IMAGE",
							"VIDEO"
						]
					},
					"id": {
						"type": "string"
					}
				},
				"required": [
					"createdAt",
					"moderationStatus",
					"size",
					"contentType",
					"type",
					"id"
				],
				"type": "object"
			},
			"CommentsListResponseDTO": {
				"properties": {
					"nextCursor": {
						"type": "string",
						"nullable": true
					},
					"data": {
						"items": {
							"$ref": "#/components/schemas/CommentDTO"
						},
						"type": "array"
					}
				},
				"required": [
					"nextCursor",
					"data"
				],
				"type": "object"
			},
			"CreateCommentBodyDTO": {
				"properties": {
					"parentId": {
						"type": "string",
						"nullable": true
					},
					"content": {
						"type": "string"
					}
				},
				"required": [
					"content"
				],
				"type": "object"
			},
			"DeleteCommentBodyDTO": {
				"properties": {
					"reason": {
						"type": "string"
					}
				},
				"type": "object"
			},
			"AuthResponseDTO": {
				"properties": {
					"user": {
						"$ref": "#/components/schemas/UserSelfDTO"
					}
				},
				"required": [
					"user"
				],
				"type": "object"
			},
			"ErrorEnvelopeDTO": {
				"properties": {
					"error": {
						"properties": {
							"requestId": {
								"type": "string"
							},
							"details": {},
							"message": {
								"type": "string"
							},
							"code": {
								"type": "string"
							}
						},
						"required": [
							"code"
						],
						"type": "object"
					}
				},
				"required": [
					"error"
				],
				"type": "object"
			},
			"RegisterBodyDTO": {
				"properties": {
					"password": {
						"type": "string"
					},
					"email": {
						"type": "string"
					},
					"username": {
						"type": "string"
					}
				},
				"required": [
					"password",
					"email",
					"username"
				],
				"type": "object"
			},
			"LoginBodyDTO": {
				"properties": {
					"password": {
						"type": "string"
					},
					"email": {
						"type": "string"
					}
				},
				"required": [
					"password",
					"email"
				],
				"type": "object"
			}
		},
		"securitySchemes": {
			"cookieAuth": {
				"type": "apiKey",
				"in": "cookie",
				"name": "accessToken"
			},
			"optionalCookieAuth": {
				"type": "apiKey",
				"in": "cookie",
				"name": "accessToken"
			}
		}
	},
	"info": {
		"title": "neobooru-backend",
		"version": "0.0.1",
		"contact": {}
	},
	"paths": {
		"/users/{id}": {
			"get": {
				"operationId": "GetUserPublic",
				"responses": {
					"200": {
						"description": "Ok",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/UserPublicDTO"
								}
							}
						}
					}
				},
				"description": "GET /users/:id\npublic profile, viewer-aware",
				"tags": [
					"Users"
				],
				"security": [
					{
						"optionalCookieAuth": []
					}
				],
				"parameters": [
					{
						"in": "path",
						"name": "id",
						"required": true,
						"schema": {
							"type": "string"
						}
					}
				]
			}
		},
		"/users/{id}/uploads": {
			"get": {
				"operationId": "GetUserUploads",
				"responses": {
					"200": {
						"description": "Ok",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/UserMediaListResponseDTO"
								}
							}
						}
					}
				},
				"description": "GET /users/:id/uploads",
				"tags": [
					"Users"
				],
				"security": [
					{
						"optionalCookieAuth": []
					}
				],
				"parameters": [
					{
						"in": "path",
						"name": "id",
						"required": true,
						"schema": {
							"type": "string"
						}
					},
					{
						"in": "query",
						"name": "limit",
						"required": false,
						"schema": {
							"format": "double",
							"type": "number"
						}
					},
					{
						"in": "query",
						"name": "cursor",
						"required": false,
						"schema": {
							"type": "string"
						}
					},
					{
						"in": "query",
						"name": "sort",
						"required": false,
						"schema": {
							"type": "string",
							"enum": [
								"new",
								"old"
							]
						}
					},
					{
						"in": "query",
						"name": "type",
						"required": false,
						"schema": {
							"type": "string",
							"enum": [
								"IMAGE",
								"VIDEO"
							]
						}
					}
				]
			}
		},
		"/users/{id}/favorites": {
			"get": {
				"operationId": "GetUserFavorites",
				"responses": {
					"200": {
						"description": "Ok",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/UserMediaListResponseDTO"
								}
							}
						}
					}
				},
				"description": "GET /users/:id/favorites",
				"tags": [
					"Users"
				],
				"security": [
					{
						"optionalCookieAuth": []
					}
				],
				"parameters": [
					{
						"in": "path",
						"name": "id",
						"required": true,
						"schema": {
							"type": "string"
						}
					},
					{
						"in": "query",
						"name": "limit",
						"required": false,
						"schema": {
							"format": "double",
							"type": "number"
						}
					},
					{
						"in": "query",
						"name": "cursor",
						"required": false,
						"schema": {
							"type": "string"
						}
					},
					{
						"in": "query",
						"name": "sort",
						"required": false,
						"schema": {
							"type": "string",
							"enum": [
								"new",
								"old"
							]
						}
					},
					{
						"in": "query",
						"name": "type",
						"required": false,
						"schema": {
							"type": "string",
							"enum": [
								"IMAGE",
								"VIDEO"
							]
						}
					}
				]
			}
		},
		"/users/{id}/comments": {
			"get": {
				"operationId": "GetUserComments",
				"responses": {
					"200": {
						"description": "Ok",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/UserCommentsListResponseDTO"
								}
							}
						}
					}
				},
				"description": "GET /users/:id/comments",
				"tags": [
					"Users"
				],
				"security": [
					{
						"optionalCookieAuth": []
					}
				],
				"parameters": [
					{
						"in": "path",
						"name": "id",
						"required": true,
						"schema": {
							"type": "string"
						}
					},
					{
						"in": "query",
						"name": "limit",
						"required": false,
						"schema": {
							"format": "double",
							"type": "number"
						}
					},
					{
						"in": "query",
						"name": "cursor",
						"required": false,
						"schema": {
							"type": "string"
						}
					},
					{
						"in": "query",
						"name": "sort",
						"required": false,
						"schema": {
							"type": "string",
							"enum": [
								"new",
								"old"
							]
						}
					}
				]
			}
		},
		"/users/{id}/ratings": {
			"get": {
				"operationId": "GetUserRatings",
				"responses": {
					"200": {
						"description": "Ok",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/UserRatingsListResponseDTO"
								}
							}
						}
					}
				},
				"description": "GET /users/:id/ratings",
				"tags": [
					"Users"
				],
				"security": [
					{
						"optionalCookieAuth": []
					}
				],
				"parameters": [
					{
						"in": "path",
						"name": "id",
						"required": true,
						"schema": {
							"type": "string"
						}
					},
					{
						"in": "query",
						"name": "limit",
						"required": false,
						"schema": {
							"format": "double",
							"type": "number"
						}
					},
					{
						"in": "query",
						"name": "cursor",
						"required": false,
						"schema": {
							"type": "string"
						}
					},
					{
						"in": "query",
						"name": "sort",
						"required": false,
						"schema": {
							"type": "string",
							"enum": [
								"new",
								"old"
							]
						}
					},
					{
						"in": "query",
						"name": "type",
						"required": false,
						"schema": {
							"type": "string",
							"enum": [
								"IMAGE",
								"VIDEO"
							]
						}
					}
				]
			}
		},
		"/users/me": {
			"get": {
				"operationId": "GetMe",
				"responses": {
					"200": {
						"description": "Ok",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/UserSelfDTO"
								}
							}
						}
					}
				},
				"description": "GET /users/me\nauth required",
				"tags": [
					"Users"
				],
				"security": [
					{
						"cookieAuth": []
					}
				],
				"parameters": []
			},
			"patch": {
				"operationId": "PatchMe",
				"responses": {
					"200": {
						"description": "Ok",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/UserSelfDTO"
								}
							}
						}
					}
				},
				"description": "PATCH /users/me\nauth required + not banned",
				"tags": [
					"Users"
				],
				"security": [
					{
						"cookieAuth": []
					}
				],
				"parameters": [],
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": {}
						}
					}
				}
			}
		},
		"/users/me/avatar": {
			"post": {
				"operationId": "UploadMyAvatar",
				"responses": {
					"200": {
						"description": "Ok",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/UserSelfDTO"
								}
							}
						}
					}
				},
				"description": "POST /users/me/avatar\nmultipart/form-data: avatar (file)",
				"tags": [
					"Users"
				],
				"security": [
					{
						"cookieAuth": []
					}
				],
				"parameters": [],
				"requestBody": {
					"required": false,
					"content": {
						"multipart/form-data": {
							"schema": {
								"type": "object",
								"properties": {
									"avatar": {
										"type": "string",
										"format": "binary"
									}
								}
							}
						}
					}
				}
			}
		},
		"/tags/search": {
			"get": {
				"operationId": "Search",
				"responses": {
					"200": {
						"description": "Ok",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/TagSuggestListResponseDTO"
								}
							}
						}
					}
				},
				"tags": [
					"Tags"
				],
				"security": [
					{
						"optionalCookieAuth": []
					}
				],
				"parameters": [
					{
						"in": "query",
						"name": "q",
						"required": true,
						"schema": {
							"type": "string"
						}
					},
					{
						"in": "query",
						"name": "limit",
						"required": false,
						"schema": {
							"format": "double",
							"type": "number"
						}
					}
				]
			}
		},
		"/tags/popular": {
			"get": {
				"operationId": "Popular",
				"responses": {
					"200": {
						"description": "Ok",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/TagSearchListResponseDTO"
								}
							}
						}
					}
				},
				"tags": [
					"Tags"
				],
				"security": [
					{
						"optionalCookieAuth": []
					}
				],
				"parameters": [
					{
						"in": "query",
						"name": "limit",
						"required": false,
						"schema": {
							"format": "double",
							"type": "number"
						}
					}
				]
			}
		},
		"/tags": {
			"post": {
				"operationId": "Create",
				"responses": {
					"201": {
						"description": "Created",
						"content": {
							"application/json": {
								"schema": {}
							}
						}
					}
				},
				"tags": [
					"Tags"
				],
				"security": [
					{
						"cookieAuth": []
					}
				],
				"parameters": [],
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": {
								"$ref": "#/components/schemas/CreateTagBodyDTO"
							}
						}
					}
				}
			}
		},
		"/tags/{id}": {
			"patch": {
				"operationId": "Patch",
				"responses": {
					"200": {
						"description": "Ok",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/TagAdminDTO"
								}
							}
						}
					}
				},
				"tags": [
					"Tags"
				],
				"security": [
					{
						"cookieAuth": []
					}
				],
				"parameters": [
					{
						"in": "path",
						"name": "id",
						"required": true,
						"schema": {
							"type": "string"
						}
					}
				],
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": {
								"$ref": "#/components/schemas/PatchTagBodyDTO"
							}
						}
					}
				}
			}
		},
		"/tags/{id}/aliases": {
			"get": {
				"operationId": "ListTagAliases",
				"responses": {
					"200": {
						"description": "Ok",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/TagAliasesListResponseDTO"
								}
							}
						}
					}
				},
				"tags": [
					"Tags"
				],
				"security": [
					{
						"cookieAuth": []
					}
				],
				"parameters": [
					{
						"in": "path",
						"name": "id",
						"required": true,
						"schema": {
							"type": "string"
						}
					}
				]
			},
			"post": {
				"operationId": "CreateTagAlias",
				"responses": {
					"201": {
						"description": "Created",
						"content": {
							"application/json": {
								"schema": {}
							}
						}
					}
				},
				"tags": [
					"Tags"
				],
				"security": [
					{
						"cookieAuth": []
					}
				],
				"parameters": [
					{
						"in": "path",
						"name": "id",
						"required": true,
						"schema": {
							"type": "string"
						}
					}
				],
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": {
								"$ref": "#/components/schemas/CreateAliasBodyDTO"
							}
						}
					}
				}
			}
		},
		"/tags/aliases/{id}": {
			"delete": {
				"operationId": "DeleteTagAlias",
				"responses": {
					"200": {
						"description": "Ok",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/OkDTO"
								}
							}
						}
					}
				},
				"tags": [
					"Tags"
				],
				"security": [
					{
						"cookieAuth": []
					}
				],
				"parameters": [
					{
						"in": "path",
						"name": "id",
						"required": true,
						"schema": {
							"type": "string"
						}
					}
				]
			}
		},
		"/media/{id}/tags": {
			"post": {
				"operationId": "SetTags",
				"responses": {
					"200": {
						"description": "Ok",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/OkDTO"
								}
							}
						}
					}
				},
				"tags": [
					"Tags"
				],
				"security": [
					{
						"cookieAuth": []
					}
				],
				"parameters": [
					{
						"in": "path",
						"name": "id",
						"required": true,
						"schema": {
							"type": "string"
						}
					}
				],
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": {
								"$ref": "#/components/schemas/TagNamesBodyDTO"
							}
						}
					}
				}
			}
		},
		"/media/{id}/tags/add": {
			"post": {
				"operationId": "AddTags",
				"responses": {
					"200": {
						"description": "Ok",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/OkDTO"
								}
							}
						}
					}
				},
				"tags": [
					"Tags"
				],
				"security": [
					{
						"cookieAuth": []
					}
				],
				"parameters": [
					{
						"in": "path",
						"name": "id",
						"required": true,
						"schema": {
							"type": "string"
						}
					}
				],
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": {
								"$ref": "#/components/schemas/TagNamesBodyDTO"
							}
						}
					}
				}
			}
		},
		"/media/{id}/tags/remove": {
			"post": {
				"operationId": "RemoveTags",
				"responses": {
					"200": {
						"description": "Ok",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/OkDTO"
								}
							}
						}
					}
				},
				"tags": [
					"Tags"
				],
				"security": [
					{
						"cookieAuth": []
					}
				],
				"parameters": [
					{
						"in": "path",
						"name": "id",
						"required": true,
						"schema": {
							"type": "string"
						}
					}
				],
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": {
								"$ref": "#/components/schemas/TagNamesBodyDTO"
							}
						}
					}
				}
			}
		},
		"/search": {
			"get": {
				"operationId": "Search",
				"responses": {
					"200": {
						"description": "Ok",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/SearchResponseDTO"
								}
							}
						}
					}
				},
				"description": "GET /search\npublic, viewer-aware",
				"tags": [
					"Search"
				],
				"security": [
					{
						"optionalCookieAuth": []
					}
				],
				"parameters": [
					{
						"in": "query",
						"name": "q",
						"required": false,
						"schema": {
							"type": "string"
						}
					},
					{
						"in": "query",
						"name": "limit",
						"required": false,
						"schema": {
							"format": "double",
							"type": "number"
						}
					},
					{
						"in": "query",
						"name": "cursor",
						"required": false,
						"schema": {
							"type": "string"
						}
					}
				]
			}
		},
		"/media/{id}/rating": {
			"post": {
				"operationId": "RateMedia",
				"responses": {
					"200": {
						"description": "Ok",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/RateMediaResponseDTO"
								}
							}
						}
					}
				},
				"description": "POST /media/:id/rating",
				"tags": [
					"Ratings"
				],
				"security": [
					{
						"cookieAuth": []
					}
				],
				"parameters": [
					{
						"in": "path",
						"name": "id",
						"required": true,
						"schema": {
							"type": "string"
						}
					}
				],
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": {
								"$ref": "#/components/schemas/SetRatingBodyDTO"
							}
						}
					}
				}
			},
			"delete": {
				"operationId": "UnrateMedia",
				"responses": {
					"200": {
						"description": "Ok",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/RateMediaResponseDTO"
								}
							}
						}
					}
				},
				"description": "DELETE /media/:id/rating",
				"tags": [
					"Ratings"
				],
				"security": [
					{
						"cookieAuth": []
					}
				],
				"parameters": [
					{
						"in": "path",
						"name": "id",
						"required": true,
						"schema": {
							"type": "string"
						}
					}
				]
			}
		},
		"/media/{id}": {
			"get": {
				"operationId": "GetMedia",
				"responses": {
					"200": {
						"description": "Ok",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/MediaVisibleDTO"
								}
							}
						}
					}
				},
				"description": "GET /media/:id\npublic, viewer-aware",
				"tags": [
					"Media"
				],
				"security": [
					{
						"optionalCookieAuth": []
					}
				],
				"parameters": [
					{
						"in": "path",
						"name": "id",
						"required": true,
						"schema": {
							"type": "string"
						}
					}
				]
			}
		},
		"/media": {
			"get": {
				"operationId": "ListMedia",
				"responses": {
					"200": {
						"description": "Ok",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/MediaListResponseDTO"
								}
							}
						}
					}
				},
				"description": "GET /media\npublic, viewer-aware",
				"tags": [
					"Media"
				],
				"security": [
					{
						"optionalCookieAuth": []
					}
				],
				"parameters": [
					{
						"in": "query",
						"name": "limit",
						"required": false,
						"schema": {
							"format": "double",
							"type": "number"
						}
					},
					{
						"in": "query",
						"name": "cursor",
						"required": false,
						"schema": {
							"type": "string"
						}
					},
					{
						"in": "query",
						"name": "sort",
						"required": false,
						"schema": {
							"type": "string"
						}
					},
					{
						"in": "query",
						"name": "type",
						"required": false,
						"schema": {
							"type": "string"
						}
					}
				]
			}
		},
		"/media/upload": {
			"post": {
				"operationId": "UploadMedia",
				"responses": {
					"201": {
						"description": "Created",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/MediaUploadDTO"
								}
							}
						}
					}
				},
				"description": "POST /media/upload\nauth required, role restricted, ban + restriction checks\n\nNOTE: multipart parsing is implemented by parseMultipartToTemp(req).\nSwagger multipart form can be added later via tsoa+multer config.",
				"tags": [
					"Media"
				],
				"security": [
					{
						"cookieAuth": []
					}
				],
				"parameters": []
			}
		},
		"/media/{id}/favorite": {
			"post": {
				"operationId": "Favorite",
				"responses": {
					"200": {
						"description": "Ok",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/OkDTO"
								}
							}
						}
					}
				},
				"description": "POST /media/:id/favorite",
				"tags": [
					"Favorites"
				],
				"security": [
					{
						"cookieAuth": []
					}
				],
				"parameters": [
					{
						"in": "path",
						"name": "id",
						"required": true,
						"schema": {
							"type": "string"
						}
					}
				]
			},
			"delete": {
				"operationId": "Unfavorite",
				"responses": {
					"200": {
						"description": "Ok",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/OkDTO"
								}
							}
						}
					}
				},
				"description": "DELETE /media/:id/favorite",
				"tags": [
					"Favorites"
				],
				"security": [
					{
						"cookieAuth": []
					}
				],
				"parameters": [
					{
						"in": "path",
						"name": "id",
						"required": true,
						"schema": {
							"type": "string"
						}
					}
				]
			}
		},
		"/media/{id}/comments": {
			"get": {
				"operationId": "ListComments",
				"responses": {
					"200": {
						"description": "Ok",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/CommentsListResponseDTO"
								}
							}
						}
					}
				},
				"description": "List comments for media (viewer-aware, public)\nGET /media/:id/comments",
				"tags": [
					"Comments"
				],
				"security": [
					{
						"optionalCookieAuth": []
					}
				],
				"parameters": [
					{
						"in": "path",
						"name": "id",
						"required": true,
						"schema": {
							"type": "string"
						}
					},
					{
						"in": "query",
						"name": "limit",
						"required": false,
						"schema": {
							"format": "double",
							"type": "number"
						}
					},
					{
						"in": "query",
						"name": "cursor",
						"required": false,
						"schema": {
							"type": "string"
						}
					},
					{
						"in": "query",
						"name": "sort",
						"required": false,
						"schema": {
							"type": "string"
						}
					}
				]
			},
			"post": {
				"operationId": "CreateMediaComment",
				"responses": {
					"201": {
						"description": "Created",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/CommentDTO"
								}
							}
						}
					}
				},
				"description": "Create comment (auth required)\nPOST /media/:id/comments",
				"tags": [
					"Comments"
				],
				"security": [
					{
						"cookieAuth": []
					}
				],
				"parameters": [
					{
						"in": "path",
						"name": "id",
						"required": true,
						"schema": {
							"type": "string"
						}
					}
				],
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": {
								"$ref": "#/components/schemas/CreateCommentBodyDTO"
							}
						}
					}
				}
			}
		},
		"/comments/{id}": {
			"delete": {
				"operationId": "DeleteCommentById",
				"responses": {
					"200": {
						"description": "Ok",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/OkDTO"
								}
							}
						}
					}
				},
				"description": "Soft-delete comment (owner or mod/admin)\nDELETE /comments/:id",
				"tags": [
					"Comments"
				],
				"security": [
					{
						"cookieAuth": []
					}
				],
				"parameters": [
					{
						"in": "path",
						"name": "id",
						"required": true,
						"schema": {
							"type": "string"
						}
					}
				],
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": {
								"$ref": "#/components/schemas/DeleteCommentBodyDTO"
							}
						}
					}
				}
			}
		},
		"/auth/register": {
			"post": {
				"operationId": "Register",
				"responses": {
					"201": {
						"description": "Created",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/AuthResponseDTO"
								}
							}
						}
					},
					"400": {
						"description": "Validation error",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/ErrorEnvelopeDTO"
								},
								"examples": {
									"Example 1": {
										"value": {
											"error": {
												"code": "VALIDATION_ERROR",
												"message": "Invalid request",
												"details": {
													"issues": [
														{
															"path": [
																"email"
															],
															"message": "Invalid email"
														}
													]
												}
											}
										}
									}
								}
							}
						}
					}
				},
				"tags": [
					"Auth"
				],
				"security": [],
				"parameters": [],
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": {
								"$ref": "#/components/schemas/RegisterBodyDTO"
							}
						}
					}
				}
			}
		},
		"/auth/login": {
			"post": {
				"operationId": "Login",
				"responses": {
					"200": {
						"description": "Ok",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/AuthResponseDTO"
								}
							}
						}
					},
					"400": {
						"description": "Validation error",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/ErrorEnvelopeDTO"
								},
								"examples": {
									"Example 1": {
										"value": {
											"error": {
												"code": "VALIDATION_ERROR",
												"message": "Invalid request",
												"details": {
													"issues": [
														{
															"path": [
																"email"
															],
															"message": "Invalid email"
														}
													]
												}
											}
										}
									}
								}
							}
						}
					},
					"401": {
						"description": "Invalid credentials",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/ErrorEnvelopeDTO"
								},
								"examples": {
									"Example 1": {
										"value": {
											"error": {
												"code": "INVALID_CREDENTIALS",
												"message": "Invalid email or password"
											}
										}
									}
								}
							}
						}
					}
				},
				"tags": [
					"Auth"
				],
				"security": [],
				"parameters": [],
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": {
								"$ref": "#/components/schemas/LoginBodyDTO"
							}
						}
					}
				}
			}
		},
		"/auth/refresh": {
			"post": {
				"operationId": "Refresh",
				"responses": {
					"200": {
						"description": "Ok",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/OkDTO"
								}
							}
						}
					}
				},
				"tags": [
					"Auth"
				],
				"security": [],
				"parameters": []
			}
		},
		"/auth/logout": {
			"post": {
				"operationId": "Logout",
				"responses": {
					"200": {
						"description": "Ok",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/OkDTO"
								}
							}
						}
					}
				},
				"tags": [
					"Auth"
				],
				"security": [
					{
						"cookieAuth": []
					}
				],
				"parameters": []
			}
		}
	},
	"servers": [
		{
			"url": "/"
		}
	]
}